<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8"/>
		<meta name="description" content="APNG topic"/>
		<meta name="keywords" content="APNG, animated portable network graphics, topic"/>
		<meta name="author" content="Ravish"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>APNG topic</title>
		<link href="styles/style.css" rel="stylesheet">
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	</head>

	<body>
		<input type="checkbox" id="toggleMode">
		<header>
			<nav>
				<ul>
					<li id="toggler">
						<label for="toggleMode" id="toggleDark"><span class="material-icons md-32">toggle_off</span><span class="material-icons md-32">dark_mode</span></label>
						<label for="toggleMode" id="toggleLight"><span class="material-icons md-32">toggle_on</span><span class="material-icons md-32">light_mode</span></label>
					</li>
					<li><a href="enhancements.html" target="_blank">Enhancements</a></li>
                    <li><a href="quiz.html" target="_blank">Quiz</a></li>
                    <li><a href="topic.html" target="_blank">Topic</a></li>
                    <li><a href="index.html" target="_blank">Home</a></li>
				</ul>
			</nav>
		</header>

		<main id="parallax-container">
			<section class="parallax parallax-bg">
				<h1>APNG rules!</h1>
			</section>
			<section class="no-parallax">
				<h2>What is it?</h2>
				<p>
					It extends the popular Portable Network Graphics (PNG) file format specification to allow images to be animated similarly to animated GIF files with additional features.
					The first frame of an APNG file is stored as a normal PNG. Since it is an extension of PNG, most standard decoders will be able to display the file without additional work.
					Basically it is a PNG file with additional chunks of data to allow for animations.
				</p>
			</section>
			<section class="parallax parallax-bg">
				<h2>Why does it exist?</h2>
			</section>
			<section class="no-parallax">
				<h3>History</h3>
				<p>It was first developed by Mozilla Corporation in 2004 to store animations needed in UIs (e.g. loading throbbers) to replace MNG animations which were deprecated the year before. MNGs had less functionality than APNGs with a much larger file size due to their decoder, the thing that will read the read and extract headers from the sequence of bytes.</p>
				<h3>Why isn't it more mainstream?</h3>
				<p>
					APNG had a lukewarm reception on release as maintainers on the PNG format debated that their format was strictly a single-image format and it was seen as such in the wider community. The rationale was that applications do not need and will not support multiple images per file due to having separate file formats for animations because a single image and a sequence of images are fundamentally used differently.
					The only way for a software to correctly distinguish between PNG and APNG is by reading the ancillary chunks which aren’t required to use PNGs, so if a software didn’t know about APNGs, the first frame would show up as a typical PNG.
					So with the maintainers of the file format against the idea of this implementation and the data of the animation hidden inside ancillary chunks that decoders used in applications could skip, APNG never grew in popularity. 
				</p>
				<aside>
					<p id="scribble">This is an APNG! -></p>
					<img src = "styles/images/bouncy.png" alt = "HTML Tutorial" />
				</aside>
			</section>
			<section class="parallax parallax-bg">
				<h2>Features/How does it work?</h2>
			</section>
			<section class="no-parallax">
				<h3>File structure</h3>
				<p>Since the APNG is an extension on the PNG file format, the base structure of the file/datastream is the same.</p>
				<img src="styles/images/TestStockImage.jpg" alt="img"/>
			</section>
			<section class="parallax parallax-bg">
				<h2>Why is APNG outdated now?</h2>
			</section>
			<section class="no-parallax">
				<table>
					<tr>
						<th>browsers</th>
						<th>versions</th>
					</tr>
					<tr>
						<td>Google Chrome</td>
						<td>96-102</td>
					</tr>
					<tr>
						<td>Firefox</td>
						<td>96-100</td>
					</tr>
					<tr>
						<td>Microsoft Edge</td>
						<td>97-99</td>
					</tr>
					<tr>
						<td>Safari</td>
						<td>14.1-15.4</td>
					</tr>
					<tr>
						<td>Opera</td>
						<td>11</td>
					</tr>
					<tr>
						<td>Safari on IOS</td>
						<td>12.5-15.4</td>
					</tr>
					<tr>
						<td>Chrome for android</td>
						<td>99</td>
					</tr>
					<tr>
						<td>Samsung internet</td>
						<td>16</td>
					</tr>
					<tr>
						<td>Internet Explorer</td> <!--are we gonna highlight cell red?-->
						<td>not supported</td>
					</tr>
				</table>
			</section>
			<section class="parallax parallax-bg">
				<h2>Features/How does it work?</h2>
			</section>
			<section class="no-parallax">
				<h3>File structure</h3>
				<p>Since the APNG is an extension on the PNG file format, the base structure of the file/datastream is the same.</p>
				<img src="styles/images/lattice_diagram.png" alt="Lattice diagram PNG image PLTE in datastream"/>
				<p>The above image shows the file strucutre of a PNG file PLTE in datastream</p>
			</section>
			<section class="parallax parallax-bg">
				<h2>Critical Chunks</h2>
			</section>
			<section class="no-parallax">
				<p>Critical Chunks are parts of data that must be present in the datastream for a successful decode of a PNG/APNG image and they must appear in this order:</p>
				<ol>
					<li>1 PNG Signature</li>
					<li>1 IHDR chunk</li>
					<li>1+IDAT chunks</li>
					<li>1 IEND chunk</li>
				</ol>
				<p>A Palette (PLTE) chunk can also be added after the IHDR as a critical chunk but is optional depending on the colour type you choose.</p>
				<p>A PLTE chunk must exist if you use colour type :</p>
				<ul>
					<li>3 (indexed-colour/Palette-Based)</li>
				</ul>
				<p><b>can appear</b> in </p>
				<ul>
					<li>2 (Truecolor/RGB) and 6 (Truecolor/RGB with Alpha)
					</li>
				</ul>
				<p>And <b>must not</b> be in the data stream if you use</P>
				<ul>
					<li>0 (Grayscale) and 4 (Grayscale with Alpha channel)</li>
				</ul>
			</section>
			

			<section class="no-parallax">
				<h3>PNG Signature</h3>
				<p>All APNGs start with a PNG signature header that communicates that the subsequent data will be a PNG starting with an IHDR chunk and ending in an IEND chunk</p>
			</section>
			
			<section class="no-parallax">
				<h3>IHDR - Image Header</h3>
				<p>This chunk must appear first after the PNG signature and contains information on the PNG’s:</p>
				<ul>
					<li>width</li>
					<li>height</li>
					<li>Bit Depth</li>
					<li>Colour Type</li>
					<li>Compression Method</li>
					<li>Filter Method</li>
					<li>Interface Method</li>
				</ul>
			</section>

			<section class="no-parallax">
				<h3>IDAT - Image Data</h3>
				<p>This chunk contains the actual image data so this is where you would store multiple frames of your animation and they must appear consecutively. They do not have a fixed size and boundaries have no semantic significance as all of them are concatenated together in the compressed datastream. The first IDAT chunk is the default image shown if the decoder encounters an error.
				</p>
			</section>

			<section class="no-parallax">
				<h3>IEND Image trailer</h3>
				<p>Must appear last and it marks the end of the PNG/APNG datastream. Its data field is also empty.</p>
			</section>

			<section class="no-parallax">
				<h3>Ancillary chunks</h3>
				<p>These chunks are not necessary if you want to successfully decode a PNG/APNG file. The APNG specifications add three new ancillary chunks.</p>
				<ul>
					<li>acTL: The Animation Control Chunk</li>
					<li>fcTL: The Frame Control Chunk</li>
					<li>fdAT: The Frame Data Chunk</li>
				</ul>
				<img src="styles/images/APNG_chunks.png" alt="Diagram illustrating a possible way to assemble an animated PNG from three individual PNG files"/>
			</section>
			

			<section class="no-parallax">
				<h3>Animation control chunk (acTL)</h3>
				<p>This appears before the IDAT chunks and communicates to the decoder the file is an APNG along with the number of frames and the number of times to loop the animation. The number of frames must equal the number of fcTL chunks or an error is thrown.</p>
			</section>

			<section class="no-parallax">
				<h3>Frame control chunk (fcTL)</h3>
				<p>Exactly one these chunks must appear before the first IDAT or fdAT chunk of the frame it applies its content to.</p>
				<p>The information that fcTL chunk holds for the upcoming frame is:</p>
				<ul>
					<li>Sequence number of the animation chunk.</li>
					<li>Width and height of the following frame.</li>
					<li>X and Y position at which to render the following frame.</li>
					<li>A frame delay fraction numerator/denominator that will decide the time to display the current frame. 
						<ul>
							<li>If the numerator is 0 then the decoder will render the frame as quickly as possible, though programs will set a more reasonable lower bound.
							</li>
						</ul>
					</li>
					<li>How the next frame should be disposed of before rendering the subsequent frame.</li>
					<li>Whether the frame is to be alpha blended into the previous frame or completely replace it</li>
				</ul>
				<img src="styles/images/alpha_channel.png" alt="Using the Alpha Channel">
				<P>The image on the right shows how translucency can be applied to an object using the alpha channel.</P>
			</section>
			
			<section class="no-parallax">
				<H3>Frame data chunk (fDat)</H3>
				<p>fdAT chunks have the same function and similar structure as an IDAT chunk. The only difference is that fdDAT chunks have an additional 4 bytes at the start that indicates the sequence number again.</p>
			</section>



			<!-- Last section -->




		</main>
        <footer class="parallax-footer">
            <a href="mailto:103936755@student.swin.edu.au" target="_blank">103936755 - Jacky Yao</a>
            <a href="mailto:103622407@student.swin.edu.au" target="_blank">103622407 - Jack Davies</a>
            <a href="mailto:103499753@student.swin.edu.au" target="_blank">103499753 - Thien An Ly</a>
            <a href="mailto:103800614@student.swin.edu.au" target="_blank">103800614 - Ravish Randev Kulathanthilage</a>
            <a href="mailto:103840759@student.swin.edu.au" target="_blank">103840759 - Jian Jia Ng</a>
        </footer>
	</body>
</html>